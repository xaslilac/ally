/* Ally Toolkit 1.2. Copyright 2011. */ (function(a){(function(a){var b=a.userAgent,c,d,e;c=b.indexOf("Chrome"),c>-1&&(e=b.slice(c+7,c+17),a.Chrome=e),c=b.indexOf("Firefox"),c>-1&&(e=b.substring(c+8),a.Firefox=e),c=b.indexOf("Safari"),c>-1&&b.indexOf("Chrome")===-1&&(d=b.indexOf("Version"),e=b.slice(d+8,c-1),a.Safari=e),c=b.indexOf("Opera"),c>-1&&(d=b.indexOf("Version"),e=b.substring(d+8),a.Opera=e),c=b.indexOf("like Mac OS X"),c>-1&&(d=b.indexOf("OS"),e=b.slice(d+3,c-1),a.iOS=e,b.indexOf("iPhone")>-1&&(a.iPhone=!0),b.indexOf("iPod")>-1&&(a.iPod=!0),b.indexOf("iPad")>-1&&(a.iPad=!0)),c=b.indexOf("Intel Mac OS X"),c>-1&&(d=b.substring(c).indexOf(";"),e=b.slice(c+15,c+d),a.Mac=e),c=b.indexOf("Windows NT"),c>-1&&(d=b.substring(c).indexOf(";"),e=b.slice(c+11,c+d),a.Windows=e)})(navigator);var b;b=function(a){return c(a)},b.version=1.2,b.build=243.1,b.copyright=2011;var c=function(){var c=arguments[0];if(c){if(c==="body")return[document.body].extend(b);if(c==="head")return[document.head].extend(b);if(c===a)return[c].extend(b);if(c.type==="String")return document.querySelectorAll(c).extend(b);if(c.type==="Array")return c.extend(b);if(c.type==="Object")return[c].extend(b)}return b},d=function(){var a=arguments[0];return a||a===0?!0:!1};a.is=d,b.is=d,b.data={},b.local=localStorage,document.head=document.getElementsByTagName("head")[0],document.byId=function(){return document.getElementById.apply(document,arguments)},document.byClass=function(){return document.getElementsByClassName.apply(document,arguments)},document.byTag=function(){return document.getElementsByTagName.apply(document,arguments)},document.byQuery=function(){return document.querySelectorAll.apply(document,arguments)},a.doc=document,a.win=a,Object.prototype.type="Object",HTMLElement.prototype.type="HTMLElement",XMLHttpRequest.prototype.type="XMLHttpRequest",Number.prototype.type="Number",Function.prototype.type="Function",RegExp.prototype.type="RegExp",Array.prototype.type="Array",String.prototype.type="String",Boolean.prototype.type="Boolean",NodeList.prototype.type="NodeList",Object.prototype.forEach=function(a){if(this===void 0||this===null)throw new TypeError;var b=Object(this),c=b.length>>>0;if(typeof a!="function")throw new TypeError;var d=[],e=arguments[1];for(var f=0;f<c;f++)f in b&&(d[f]=a.call(e,b[f],f,b));return d},Object.prototype.extend=function(){var a=arguments[0],b=arguments[1],c=this;for(prop in a)c[prop]=a[prop];b&&b.Function&&b();return c},Array.prototype.fuse=function(){var a=arguments[0],b=arguments[1],c=[];a.forEach(function(a){a.forEach(function(a){c.push(a)})}),b&&b.Function&&b();return c},Object.prototype.merge=function(){var a=arguments[0],b=arguments[1],c={};a.forEach(function(a){for(prop in a)c[prop]=a[prop]}),b&&b.Function&&b();return c},b.data.onloadtasks=[],b.extend({onload:function(){b.data.onloadtasks.push(arguments[0]);return b.data.onloadtasks},ready:b.onload});var e=function(){document.readyState==="complete"?(b.data.onloadtasks.forEach(function(a){a()}),delete e):setTimeout(e,10)};e(),b.extend({add:function(){var a=arguments[0],b=arguments[1],c=arguments[2],d=[];if(!a){var e=this[0].tagName;e==="BODY"&&(a="div"),e==="DIV"?a="p":a="span"}var d=this.forEach(function(c,d){var e=document.createElement(a);c.appendChild(e),b&&(b[0]==="#"&&(d===0?e.id=b.replace("#",""):e.id=b.replace("#","")+"-"+d),b[0]==="."&&(e.className=b.replace(".","")));return e});return d},remove:function(){var a=this.forEach(function(a){a.parentNode.removeChild(a)})}}),b.extend({html:function(){var a=arguments[0],b=[];if(a)var b=this.forEach(function(b){return b.innerHTML=a});else var b=this.forEach(function(a){return a.innerHTML});return b},value:function(){var a=arguments[0],b=[];if(a)var b=this.forEach(function(b){return b.value=a});else var b=this.forEach(function(a){return a.value});return b},empty:function(){var a=[],a=this.forEach(function(a){a.innerHTML="",a.value="";return""});return a}}),b.extend({attr:function(){var a=arguments[0],b=arguments[1],c=[];b&&(this[0].setAttribute?this.forEach(function(c){c.setAttribute(a,b)}):this.forEach(function(c){c[a]=b}));var c=this.forEach(function(b){return b[a]});return c},removeAttr:function(){var a=arguments[0],b=[];if(this[0].removeAttribute)var b=this.forEach(function(b){b.removeAttribute(a);return b.getAttribute(a)});else var b=this.forEach(function(b){delete b[a];return b[a]});return b}}),b.extend({classes:function(){var a=[],a=this.forEach(function(a){return a.className});return a},addClass:function(){var a=arguments[0];this.forEach(function(b){b.className=b.className+" "+a});return this.classes()},removeClass:function(){var a=arguments[0];this.forEach(function(b){b.className=b.className.replace(a,"")});return this.classes()}}),b.extend({css:function(){var a=arguments[0],b=arguments[1],c=arguments[2];c===undefined&&(c="");var d=[];b&&this.forEach(function(d){d.style.setProperty(a,b,c)});var d=this.forEach(function(b){return b.style.getPropertyValue(a)?b.style.getPropertyValue(a):getComputedStyle(b).getPropertyValue(a)});return d},removeProperty:function(){var a=arguments[0],b=[];this.forEach(function(b){b.style.removeProperty(a)});return this.css(a)},hide:function(){var a=arguments[0],b=arguments[0];a||(a=300);var c=[];this.css("display","block"),this.css("opacity","1");var d=a/10,e=this,f=setInterval(function(){var a=parseFloat(e.css("opacity")[0]);a>=.15?e.css("opacity",a-.1):(e.css("opacity","0"),e.css("display","none"),clearInterval(f))},d);b&&b.Function&&b()},show:function(){var a=arguments[0],b=arguments[0];a||(a=300);var c=[];this.css("display","block"),this.css("opacity","0");var d=a/10,e=this,f=setInterval(function(){var a=parseFloat(e.css("opacity")[0]);a<=.85?e.css("opacity",a+.1):(e.css("opacity","1"),clearInterval(f))},d);b&&b.Function&&b()}}),b.extend({event:function(){var a=arguments[0],b=arguments[1],c=arguments[2];c===undefined&&(c=!1);var d=this.forEach(function(d){d.addEventListener(a,b,c);return a});return d}}),b.extend({absolute:function(){var a=arguments[0];return a>=0?a:a*-1},opposite:function(){return arguments[0]*-1},average:function(){var a=arguments[0],b=0;a.forEach(function(a){b=b+a});return b/a.length},random:function(){var a=parseInt(arguments[0]),b=parseInt(arguments[1]);a||(a=0);if(!b||b<a)b=a+10;var c=Math.random(),d=b-a;c=c*d,arguments[2]&&(c=Math.round(c));return c+a}}),b.extend({retrieve:function(){var a=arguments[0],c=arguments[1],d=arguments[2],e=arguments[3],f=arguments[4];c||(c="POST"),e||(e=!0);var g=new XMLHttpRequest;g.open(c,a,e),g.send(d),f&&f.Function&&b(g).event("load",function(){f()});return g},open:function(){var a=arguments[0],c=arguments[1],d=arguments[2],e=arguments[3],f=arguments[4];c||(c="POST"),e||(e=!0);var g=new XMLHttpRequest;g.open(c,a,e),g.send(d),this.forEach(function(a){a.innerHTML=g.responseText}),f&&f.Function&&b(g).event("load",function(){f()});return g},script:function(){var a=arguments[0],b=arguments[1],c=document.createElement("script");c.src=a,document.head.appendChild(c),b&&b.Function&&b();return c},stylesheet:function(){var a=arguments[0],b=arguments[1];b||(b="all");var c=document.createElement("style");c.innerHTML="@import url('"+a+"') "+b+";",document.head.appendChild(c);return c}}),b.keys={},b.onload(function(){b("body").event("keydown",function(a){b.keys[a.keyCode]&&(a.shiftKey?b.keys[a.keyCode].shift&&b.keys[a.keyCode].shift.down&&b.keys[a.keyCode].shift.down.type==="Function"&&b.keys[a.keyCode].shift.down():b.keys[a.keyCode].down&&b.keys[a.keyCode].down.type==="Function"&&b.keys[a.keyCode].down()),b.keys.all&&(a.shiftKey?b.keys.all.shift&&b.keys["all".shift.down]&&b.keys.all.shift.down.type==="Function"&&b.keys.all.shift.down():b.keys.all.down&&b.keys.all.down.type==="Function"&&b.keys.all.down())}),b("body").event("keyup",function(a){b.keys[a.keyCode]&&(a.shiftKey?b.keys[a.keyCode].shift&&b.keys[a.keyCode].shift.up&&b.keys[a.keyCode].shift.up.type==="Function"&&b.keys[a.keyCode].shift.up():b.keys[a.keyCode].up&&b.keys[a.keyCode].up.type==="Function"&&b.keys[a.keyCode].up()),b.keys.all&&(a.shiftKey?b.keys.all.shift&&b.keys["all".shift.up]&&b.keys.all.shift.up.type==="Function"&&b.keys.all.shift.up():b.keys.all.up&&b.keys.all.up.type==="Function"&&b.keys.all.up())})}),b.extend({transform:function(){var a=arguments[0],b=arguments[1],c=arguments[2];if(!a||!b)throw new Error("No property/value.");d(c)||(c=1e3),c==="slow"&&(c=1500),c==="fast"&&(c=500),this.css("transition","All "+c+"ms ease"),this.css("-webkit-transition","All "+c+"ms ease"),this.css("-moz-transition","All "+c+"ms ease"),this.css("-o-transition","All "+c+"ms ease"),this.css("transform",a+"("+b+")"),this.css("-webkit-transform",a+"("+b+")"),this.css("-moz-transform",a+"("+b+")"),this.css("-o-transform",a+"("+b+")")}}),a.Ally=a.ally=a.$=b})(window)